SCHEMATRON,CONTEXT,TESTTYPE,TEST,RULETEXT,DIAGNOSTICS
CUSTER,*:archdesc,assert,@level,You must supply a level attribute at the resource level,
CUSTER,*:archdesc/*:did,assert,*:unittitle[normalize-space()],You must supply a title at the resource level,
CUSTER,*:archdesc/*:did,assert,descendant::*:unitdate[normalize-space()] or descendant::*:unitdate[@normal],You must supply a date at the resource level (including as child of unittitle),
CUSTER,*:archdesc/*:did,assert,*:unitid[normalize-space()][1],You must supply an identifier at the resource level,
CUSTER,*:archdesc/*:did,assert,*:physdesc/*:extent[normalize-space()][1],"You must supply an extent statement at the resource level. This should be formatted with an extent number and an extent type, like so: ""3.25 cubic meters""",
CUSTER,*:archdesc/*:did,assert,"*:physdesc/*:extent[1][matches(normalize-space(.), '\D')]","The extent statement must contain more than just an extent number. If you're making use of the @unit attribute, you would probably be safe in copying that value to the end of the extent's text node (e.g. @unit=""Linear Feet"", 5... could be changed to @unit=""Linear Feet"", 5 Linear Feet)",
CUSTER,*:archdesc/*:did,assert,"*:physdesc/*:extent[1][matches(normalize-space(.), '\s')][matches(normalize-space(.), '^\d')]","The extent statement must start with a number and it must also have at least one space present. (e.g. ""5 Linear Feet"" is a valid value, but ""5items"" is not).",
CUSTER,"*:unitdate[contains(@normal, '/')]",assert,"replace($end_date, '-', '') >= replace($begin_date, '-', '')","The date normalization value for this field needs to be updated. The first date, {$begin_date} , is encoded as occurring before the end date, {$end_date}",
CUSTER,*[@level ='otherlevel'],assert,@otherlevel,"If the value of a level attribute is ""otherlevel', then you must specify the value of the otherlevel attribute",
CUSTER,"*:c/*:did | *[matches(local-name(), '^c0|^c1')]/*:did",assert,parent::*/@level,You must specify a level attribute at every level of description,
CUSTER,"*:c/*:did | *[matches(local-name(), '^c0|^c1')]/*:did",assert,*:unittitle[normalize-space()] or descendant::*:unitdate[normalize-space()] or descendant::*:unitdate[@normal],"You must specify either a title or a date when describing archival components (this is a requirement enforced by the AchivesSpace data model, not by EAD)",
CUSTER,"*:c/*:did/*:physdesc/*:extent[1] | *[matches(local-name(), '^c0|^c1')]/*:did/*:physdesc/*:extent[1]",assert,"matches(normalize-space(.), '\D')","The extent statement should contain more than just an extent number since ArchivesSpace will not import any extent attribute values. If you're making use of the @unit attribute, you would probably be safe in copying that value to the end of the extent's text node (e.g. @unit=""Linear Feet"", 5... could be changed to @unit=""Linear Feet"", 5 Linear Feet)",
CUSTER,*:container[not(@parent)],assert,@id,"In order to ensure that your container elements import properly, you should assign id attributes for each container grouping per archival component",
HARVARD,//extent,assert,"matches(., '^[0123456789]')",'extent' element content should not start with non-numeric character.,"Ref-number: 18 Content: Value is "" {.} """
HARVARD,//descgrp[@type and @type != 'add']/head,assert,not(.),'head' element should be dropped from descgrp,Ref-number: 11
HARVARD,//descgrp[@type and @type != 'add']/address| //descgrp[@type and @type != 'add']/blockquote| //descgrp[@type and @type != 'add']/chronlist| //descgrp[@type and @type != 'add']/list| //descgrp[@type and @type != 'add']/p,assert,not(.),"'descgrp' is deprecated, and must be removed. 'address', 'blockquote', 'chronlist', 'list', and 'p' children of 'descgrp' must be reparented into a new 'note' element in the 'descgrp's parent element",Ref-number: 11 Content: ' {local-name(.)} ' element can be moved out of 'descgrp' element into a new 'note' element in surrounding ' {local-name(./../..)} '
HARVARD,//descgrp[@type and @type != 'add']/accessrestrict| //descgrp[@type and @type != 'add']/accruals| //descgrp[@type and @type != 'add']/acquinfo| //descgrp[@type and @type != 'add']/altformavail| //descgrp[@type and @type != 'add']/appraisal| //descgrp[@type and @type != 'add']/custodhist| //descgrp[@type and @type != 'add']/note| //descgrp[@type and @type != 'add']/prefercite| //descgrp[@type and @type != 'add']/processinfo| //descgrp[@type and @type != 'add']/userestrict| //descgrp[@type and @type != 'add']/accessrestrict| //descgrp[@type and @type != 'add']/accruals| //descgrp[@type and @type != 'add']/acquinfo| //descgrp[@type and @type != 'add']/altformavail| //descgrp[@type and @type != 'add']/appraisal| //descgrp[@type and @type != 'add']/custodhist| //descgrp[@type and @type != 'add']/note| //descgrp[@type and @type != 'add']/prefercite| //descgrp[@type and @type != 'add']/processinfo| //descgrp[@type and @type != 'add']/userestrict,assert,not(.),"'descgrp' is deprecated, and must be removed. Element children of the following types must be reparented into 'descgrp's parent element: 'accessrestrict', 'accruals', 'acquinfo', 'altformavail', 'appraisal', 'custodhist', 'note', 'prefercite', 'processinfo', 'userestrict', 'accessrestrict', 'accruals', 'acquinfo', 'altformavail', 'appraisal', 'custodhist', 'note', 'prefercite', 'processinfo', 'userestrict'",Ref-number: 11 Content: ' {local-name(.)} ' element can be moved out of 'descgrp element into surrounding ' {local-name(./../..)} '
HARVARD,//descgrp[@type],assert,not(@type='add'),"'descgrp' is deprecated, and must be removed. 'descgrp' element with type 'add' requires manual review and intervention.",Ref-number: 11
HARVARD,/ead/archdesc/did,assert,.[unitid],Collection level 'did' element must contain a 'unitid' element.,Ref-number: 12
HARVARD,/ead/archdesc/did,assert,.[unittitle],Collection level 'did' element must contain a 'unittitle' element.,Ref-number: 13
HARVARD,/ead/archdesc/did,assert,.[unitdate or unittitle/unitdate],Collection level 'did' element must contain a 'unitdate' element.,Ref-number: 14
HARVARD,/ead/archdesc/did,assert,.[physdesc/extent],Collection level 'did' element must contain 'physdesc' element with 'extent' child.,Ref-number: 16
HARVARD,/ead/archdesc/*[not(local-name(.) = 'did')]//did,assert,count(./unitdate|./unittitle) > 0,"'did' elements must contain a either a 'unitdate' element, a 'unittitle' element or both.",Ref-number: 15
HARVARD,/ead/archdesc/did/unitid,assert,./text()[normalize-space(.)],Collection level 'unitid' element must not be empty.,Ref-number: 12
HARVARD,/ead/archdesc/did/unittitle,assert,./text()[normalize-space(.)],Collection level 'unittitle' element must not be empty.,Ref-number: 13
HARVARD,/ead/archdesc/did/unitdate| /ead/archdesc/did/unittitle/unitdate,assert,./text()[normalize-space(.)],Collection level 'unitdate' element must not be empty.,Ref-number: 14
HARVARD,/ead/archdesc/did/physdesc/extent,assert,./text()[normalize-space(.)],Collection level 'physdesc/extent' element must not be empty.,Ref-number: 16
HARVARD,//table,assert,not(.),'table' element is deprecated and must be removed.,Ref-number: 25
HARVARD,//date,assert,not(.[@startYear or @endYear]),'date' element must not contain 'startYear' or 'endYear' attributes.,Ref-number: 38 Content: Content from ' {local-name(.)} ' element's 'startYear' ( {./@startYear} ) and 'endYear' ( {./@endYear} ) attributes should be combined into a single 'normal' attribute separated by '/' ( {./@startYear} / {./@endYear} )
HARVARD,//unitdate,assert,not(.[@startYear or @endYear]),'unitdate' element must not contain 'startYear' or 'endYear' attributes.,Ref-number: 38 Content: Content from ' {local-name(.)} ' element's 'startYear' ( {./@startYear} ) and 'endYear' ( {./@endYear} ) attributes should be combined into a single 'normal' attribute separated by '/' ( {./@startYear} / {./@endYear} )
